# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```



## Архитектура проекта
построена на паттерне MVP (Model-View-Presenter), который разделяет ответственность между тремя основными частями приложения:

Model (Модель): отвечает за управление данными. Она получает, сохраняет и обрабатывает информацию, например, данные о товарах или заказах, поступающие с сервера. 
Также обрабатывает данные форм и отправляет их обратно на сервер.
View (Представление): отображает интерфейс и взаимодействует с пользователем, показывая информацию, полученную из Model.Cтраница с товарами, модальное окно корзины или форма заказа.
Presenter (Представитель): является посредником между Model и View. Он получает события от View (например, нажатие кнопок) и, используя Model, обновляет данные, а затем отображает изменения во View.

View реагирует на действия пользователя и передает события в Presenter.
Presenter получает эти события и запрашивает или обновляет данные через Model.
После обновления данных Presenter обновляет View, чтобы пользователь видел актуальные данные.

## Приложение состоит из следующих основных классов:

# Класс Api:Содержит основную логику для отправки запросов. 
В конструктор передаются базовый URL сервера и опциональный объект с заголовком запроса.
  Методы:
  ```
  get: выполняет GET-запрос на указанный в параметрах эндпоинт и возвращает промис с объектом, полученным в ответе от сервера.
  post: принимает объект с данными, которые будут отправлены в теле запроса в формате JSON, и отправляет их на эндпоинт,
  переданный как параметр при вызове метода.
  ```

# Класс EventEmitter: 
Класс, обеспечивающий работу событий. Его основная цель — установка, снятие и вызов слушателей событий.
  Методы:
  ```
  on(event: string, callback: Function): подписка на событие.
  off(event: string, callback: Function): отмена подписки на событие.
  emit(event: string, data?: any): вызов события и всех связанных слушателей.
  ```


# Класс Model: Абстрактный класс, предназначен для работы с данными и внесения изменений.
Его конструктор создает новый экземпляр модели с указанными данными и событиями, которые реализует IEvents.
  
  Методы:
   ```
   sendUpdates: используется для передачи событий, содержащих информацию об изменениях данных, к нужным компонентам или модулям.
   ```

# Класс AppData (наследник Model): 
Назначение: Хранит данные приложения, включая каталог товаров, элементы корзины, данные заказа и ошибки формы.

  Поля
  ```
  catalog (ICard[]) – Массив объектов каталога товаров.
  basketItems (string[]) – Массив идентификаторов товаров в корзине.
  currentItemID (string | null) – Идентификатор открытого товара.
  orderData (IOrder) – Данные заказа.
  formErrors (string[]) – Массив ошибок формы.
  ```

  Методы:
  ```
  getCatalog(): ICard[]- получение массива каталога товаров.
  showProductPreview(id: string): void – Отображает предварительный просмотр товара по ID.
  toggleBasket(itemID: string): void – Добавляет или удаляет товар из корзины.
  totalBasket(): number – Возвращает общую сумму корзины.
  indexBasket(): void - для нумерации товаров в корзине.
  clearBasket(): void - очищает корзину.  
  addBasketToOrder(): void – Переносит товары из корзины в заказ.
  setPayMethod(payment: string): void – для выбора способа оплаты.
  setAddress(address: string): void – для указания адреса доставки.
  setPhone(phone: string): void – для указания номера телефона для заказа.
  setEmail(email: string): void – для указания электронной почты для заказа.
  validateOrder(): boolean – проводит проверку валидности заказа и отправляет событие об изменении.
  resetOrder(): void – сбрасывает данные о заказе.
  ```

# Класс Component: абстрактный класс для всех компонентов пользовательского интерфейса.
  Назначение: Базовый класс для создания UI-компонентов с методами для работы с DOM.
  Конструктор принимает HTMLElement
  Методы:
  ```
  setText(element: HTMLElement, text: string): void – Устанавливает текст элемента.
  setElementDisabled(element: HTMLElement, disabled: boolean): void – Блокирует элемент. 
  hideElement(element: HTMLElement): void – Скрывает элемент.
  showElement(element: HTMLElement): void – Показывает элемент.
  setImage(element: HTMLElement, src: string, alt: string): void – Устанавливает изображение и альтернативный текст.
  renderComponent(data: any): HTMLElement – Создаёт и возвращает компонент.
  ```

# Класс Modal(наследник Component): 
  Назначение: Управляет модальными окнами.
  Методы:
  ```
  open(): открытие модального окна.
  close(): закрытие модального окна.
  render(): отображение компонента на экране.
  ```
  
# Класс Basket(наследник Component): 
  Назначение: Компонент для отображения и управления корзиной товаров.
  Конструктор принимает HTMLElement и событие IEvents
  Поля:
  ```
  BasketItems (HTMLElement[]) – Массив элементов корзины.
  totalCost (number) – Общая стоимость товаров в корзине.
  ```

# Класс Card: 
  Назначение: Компонент для отображения карточки товара.
  Его конструктор принимает контейнер и объект типа ICardOperations, который определяет действия, доступные при взаимодействии с карточкой товара.
  Поля:
  ```
  cardTitle (string) – Название товара.
  cardDescription (string) – Описание товара.
  cardId (string) – Идентификатор товара.
  cardPrice (number | null) – Цена товара.
  actionButton (HTMLElement) – Кнопка действия.
  cardImage (string) – URL изображения товара.
  cardCategory (CategoryCard) – Категория товара.
  ```

# Класс Form(наследник Component):  
  Назначение: Класс для управления формой заказа, включая валидацию и отображение ошибок.

  Методы:
  ```
  resetFields(): void – Очищает поля формы.
  inputChange(event: Event): void – Обрабатывает изменения в полях ввода.
  renderForm(data: IFormView): void – Отображает форму на странице.
  ```
  
# Класс Success (наследник Component)
  Назначение: Компонент для отображения экрана успешного оформления заказа.
  Поля:
  ```
  message (string) – Сообщение об успешном оформлении заказа.
  ```
  Методы:
  ```
  renderSuccessMessage(message: string): void – Отображает сообщение об успешной операции.
  onClose(): void – Закрывает сообщение об успехе.
  ```

## Основные типы данных, используемые в приложении прописаны в src/types/index.ts:








