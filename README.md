# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```



## Архитектура проекта
построена на паттерне MVP (Model-View-Presenter), который разделяет ответственность между тремя основными частями приложения:

Model (Модель): отвечает за управление данными. Она получает, сохраняет и обрабатывает информацию, например, данные о товарах или заказах, поступающие с сервера. 
Также обрабатывает данные форм и отправляет их обратно на сервер.
View (Представление): отображает интерфейс и взаимодействует с пользователем, показывая информацию, полученную из Model.Cтраница с товарами, модальное окно корзины или форма заказа.
Presenter (Представитель): является посредником между Model и View. Он получает события от View (например, нажатие кнопок) и, используя Model, обновляет данные, а затем отображает изменения во View.

View реагирует на действия пользователя и передает события в Presenter.
Presenter получает эти события и запрашивает или обновляет данные через Model.
После обновления данных Presenter обновляет View, чтобы пользователь видел актуальные данные.

## Приложение состоит из следующих основных классов:

# Класс Api:
Назначение: Класс для работы с API, выполняет отправку и получение данных с сервера.
В конструктор передаются базовый URL сервера и опциональный объект с заголовком запроса.
  Методы:
  ```
  get: выполняет GET-запрос на указанный в параметрах эндпоинт и возвращает промис с объектом, полученным в ответе от сервера.
  post: принимает объект с данными, которые будут отправлены в теле запроса в формате JSON, и отправляет их на эндпоинт,
  переданный как параметр при вызове метода.
  ```

# Класс EventEmitter: 
Назначение: Управляет подписками на события, устанавливает, снимает и вызывает обработчики событий.
  Методы:
  ```
  on(event: string, callback: Function): void – Подписка на событие.
  off(event: string, callback: Function): void – Отмена подписки на событие.
  emit(event: string, data?: any): void – Вызов события с данными.
  ```


# Класс Model: Абстрактный класс, предназначен для работы с данными и внесения изменений.
Его конструктор создает новый экземпляр модели с указанными данными и событиями, которые реализует IEvents.
  
  Методы:
   ```
   sendUpdates(data: any): void – Отправка события с обновленными данными.
   ```

# Класс AppData (наследник Model): 
Назначение: Хранит данные приложения, включая каталог товаров, элементы корзины, данные заказа и ошибки формы.

  Поля
  ```
  catalog (ICard[]) – Массив объектов каталога товаров.
  basketItems (string[]) – Массив идентификаторов товаров в корзине.
  currentItemID (string | null) – Идентификатор открытого товара.
  orderData (IOrder) – Данные заказа.
  formErrors (string[]) – Массив ошибок формы.
  ```

  Методы:
  ```
  getCatalog(): ICard[]- получение массива каталога товаров.
  showProductPreview(id: string): void – Отображает предварительный просмотр товара по ID.
  toggleBasket(itemID: string): void – Добавляет или удаляет товар из корзины.
  totalBasket(): number – Возвращает общую сумму корзины.
  indexBasket(): void - для нумерации товаров в корзине.
  clearBasket(): void - очищает корзину.  
  addBasketToOrder(): void – Переносит товары из корзины в заказ.
  setPayMethod(payment: string): void – для выбора способа оплаты.
  setAddress(address: string): void – для указания адреса доставки.
  setPhone(phone: string): void – для указания номера телефона для заказа.
  setEmail(email: string): void – для указания электронной почты для заказа.
  validateOrder(): boolean – проводит проверку валидности заказа и отправляет событие об изменении.
  resetOrder(): void – сбрасывает данные о заказе.
  ```

# Класс Component: абстрактный класс для всех компонентов пользовательского интерфейса.
  Назначение: Базовый класс для создания UI-компонентов с методами для работы с DOM.
  Конструктор принимает HTMLElement
  Методы:
  ```
  setText(element: HTMLElement, text: string): void – Устанавливает текст элемента.
  setElementDisabled(element: HTMLElement, disabled: boolean): void – Блокирует элемент. 
  hideElement(element: HTMLElement): void – Скрывает элемент.
  showElement(element: HTMLElement): void – Показывает элемент.
  setImage(element: HTMLElement, src: string, alt: string): void – Устанавливает изображение и альтернативный текст.
  renderComponent(data: any): HTMLElement – Создаёт и возвращает компонент.
  ```

# Класс Modal: 
  Назначение: Управляет модальными окнами.
  Методы:
  ```
  open(): void – Открывает модальное окно.
  close(): void – Закрывает модальное окно.
  render(): void – Отображает модальное окно.
  ```

# Класс Page 
  Является компонентом страницы и управляет элементами страницы. 
  Добавляет слушатель при нажатии на корзину. 
  Поля HTML-элементов: 
  -обертка страницы. 
  -отображение каталога с карточками.
  -отображения корзины.
  -кол-во товаров в корзине.

  Свойства:
  ```
  counter - устанавливка значение счетчика
  catalog - обновление содержимого каталога новыми элементами.
  locked - управление видимостью и доступностью элементов страницы, позволяет или блокирует действия пользователя.
  ```


  
# Класс Basket: 
  Назначение: Компонент для отображения и управления корзиной товаров.
  Конструктор принимает HTMLElement и объект IEvents
  Поля:
  ```
  BasketItems (HTMLElement[]) – Массив элементов корзины.
  totalCost (number) – Общая стоимость товаров в корзине.
  ```

# Класс Card: 
  Назначение: Компонент для отображения карточки товара.
  Его конструктор принимает контейнер и объект типа ICardOperations, который определяет действия, доступные при взаимодействии с карточкой товара.
  Поля:
  ```
  cardTitle (string) – Название товара.
  cardDescription (string) – Описание товара.
  cardId (string) – Идентификатор товара.
  cardPrice (number | null) – Цена товара.
  actionButton (HTMLElement) – Кнопка действия.
  cardImage (string) – URL изображения товара.
  cardCategory (CategoryCard) – Категория товара.
  ```

# Класс Form:  
  Назначение: Класс для управления формой заказа, включая валидацию и отображение ошибок.

  Методы:
  ```
  resetFields(): void – Очищает поля формы.
  inputChange(event: Event): void – Обрабатывает изменения в полях ввода.
  renderForm(data: IFormView): void – Отображает форму на странице.
  ```


# Класс OrderPay (наследник Form)
  Конструктор принимает HTMLElement и объект IEvents
  Использует тип TOrderPay
  Инициализирует кнопки для выбора способа оплаты, которые будут использованы в методах, а также поле для ввода адреса. 
  При активации кнопок оплаты устанавливается обработчик событий, который передает выбранные данные.   
  Свойства:
  ```
  address: HTMLInputElement - устанавливает адрес
  ```
  Методы:
  ```
  clearPay(): void - снимает класс активного состояния с кнопки
  togglePay(activeButton: HTMLButtonElement): void - очищает статус кнопок и устанавливает новую активную кнопку.
  ```

  # Класс ContactsOrder (наследник Form)
  Конструктор принимает HTMLElement и объект IEvents
  Инициализирует поля формы с почтой и телефоном.
  Свойства:
  ```
  email: string - устанавливает почту
  phone: string - устанавливает номер телефона
  ```

# Класс Success (наследник Component)
  Назначение: Компонент для отображения экрана успешного оформления заказа.
  Поля:
  ```
  message (string) – Сообщение об успешном оформлении заказа.
  ```
  Методы:
  ```
  renderSuccessMessage(message: string): void – Отображает сообщение об успешной операции.
  onClose(): void – Закрывает сообщение об успехе.
  ```

## Основные типы данных, используемые в приложении прописаны в src/types/index.ts:








